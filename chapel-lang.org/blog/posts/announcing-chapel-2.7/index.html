<!DOCTYPE html>

<html data-theme="light" lang="en"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta content="#00cbff" name="theme-color"/>
<meta content="Highlights from the December 2025 release of Chapel 2.7" name="description"/>
<link href="//cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css" media="screen,print" rel="stylesheet"/>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/katex.min.css" integrity="sha384-bYdxxUwYipFNohQlHt0bjN/LCpueqWz13HufFEV1SUatKs1cm4L6fFgCi1jT643X" rel="stylesheet"/>
<style>.sidenote-checkbox { display: none; }</style>
<style>.feather { width: 1rem; height: 1rem; }</style>
<link href="../../scss/style.min.css" media="screen,print" rel="stylesheet"/>
<link href="../../scss/sidenotes.min.css" media="screen,print" rel="stylesheet"/>
<link href="../../css/syntax.min.css" media="screen,print" rel="stylesheet"/>
<link href="../../scss/syntax-terminal.min.css" media="screen,print" rel="stylesheet"/>
<link href="../../scss/code.min.css" media="screen,print" rel="stylesheet"/>
<link href="../../img/favicon.ico" rel="icon" type="image/png"/>
<script defer="" src="../../js/dropdown-menu.js"></script>
<title>Announcing Chapel 2.7!</title>
</head>
<body>
<header>
<div class="container">
<a class="site-title" href="../../">
<img alt="Chapel logo" height="50" src="../../img/logo.png" width="50"/>
<h1>Chapel Language Blog</h1>
</a>
</div>
<nav id="Header">
<div class="container">
<a href="../../about">About</a>
<a href="https://chapel-lang.org">Chapel Website</a>
<a href="../../featured">Featured</a>
<a href="../../series">Series</a>
<a href="../../tags">Tags</a>
<a href="../../authors">Authors</a>
<a href="../../posts">All Posts</a>
</div>
</nav>
</header>
<main class="container">
<h2>Announcing Chapel 2.7!</h2>
<div class="post-subscript">
<p>Posted on December 18, 2025.</p>
<p>
        Tags:
        
        <a class="button" href="../../tags/release-announcements">Release Announcements</a>
<a class="button" href="../../tags/vectorization">Vectorization</a>
<a class="button" href="../../tags/debugging">Debugging</a>
<a class="button" href="../../tags/mason">Mason</a>
<a class="button" href="../../tags/tools">Tools</a>
<a class="button" href="../../tags/dyno">Dyno</a>
</p>
<p>
    By:
    <a href="../../authors/jade-abraham">Jade Abraham</a>, <a href="../../authors/engin-kayraklioglu">Engin Kayraklioglu</a>, <a href="../../authors/daniel-fedorin">Daniel Fedorin</a>, <a href="../../authors/ben-harshbarger">Ben Harshbarger</a>, <a href="../../authors/brad-chamberlain">Brad Chamberlain</a>
</p>
</div>
<div class="post-content">
<div class="table-of-contents">
<div class="wrapper">
<span class="header">Table of Contents</span>
<nav id="TableOfContents">
<ul>
<li><a href="#using-vector-libraries">Using vector libraries</a></li>
<li><a href="#debugging">Debugging</a>
<ul>
<li><a href="#multi-locale-debugging">Multi-locale debugging</a></li>
<li><a href="#compiler-flags-for-debugging">Compiler Flags for Debugging</a></li>
<li><a href="#improved-stack-traces">Improved stack traces</a></li>
</ul>
</li>
<li><a href="#mason-improvements">Mason Improvements</a></li>
<li><a href="#improvements-to-the-dyno-compiler-front-end">Improvements to the Dyno Compiler Front-End</a>
<ul>
<li><a href="#more-language-features">More Language Features</a></li>
<li><a href="#generating-executable-code">Generating Executable Code</a></li>
</ul>
</li>
<li><a href="#for-more-information">For More Information</a></li>
</ul>
</nav>
</div>
</div>
<p>The Chapel developer community is pleased to announce the release of
Chapel 2.7!  Notably, this is the first version of Chapel to be made
available since our project <a href="https://hpsf.io/blog/2025/hpsf-welcomes-chapel/" rel="noopener" target="_blank">joined the High Performance Software
Foundation</a> this
fall.</p>
<p>As always, you can <a href="https://chapel-lang.org/download/" rel="noopener" target="_blank">download and
install</a> this new version in a
<span class="sidenote"><label class="sidenote-label" for="sidenote-0">variety of formats</label><input class="sidenote-checkbox" id="sidenote-0" type="checkbox"/><span class="sidenote-content sidenote-right"><span class="sidenote-delimiter">[note:</span>Please note that some
formats may not yet be available at time of
publication…<span class="sidenote-delimiter">]</span></span></span>, including Spack, Docker, Homebrew,
various Linux package managers, and source tarballs.</p>
<p>This article introduces some of the highlights of Chapel 2.7,
including:</p>
<ul>
<li>
<p>A new compiler flag supporting <a href="#using-vector-libraries">vector libraries</a></p>
</li>
<li>
<p>Improvements when <a href="#debugging">debugging Chapel programs</a></p>
</li>
<li>
<p><a href="#improved-stack-traces">Stack traces</a> on fatal errors by default</p>
</li>
<li>
<p>Enhancements to <a href="#mason-improvements">Mason</a>, Chapel’s package manager</p>
</li>
<li>
<p>Improvements to the capabilities of the <a href="#improvements-to-the-dyno-compiler-front-end">Dyno compiler
front-end</a></p>
</li>
</ul>
<p>In addition to the above features, Chapel 2.7 also includes
improvements to the pre-built <a href="https://chapel-lang.org/download/#linux" rel="noopener" target="_blank">Linux
packages</a>, in terms of
features and flexibility.</p>
<p>For more information, or a much more complete list of changes in
Chapel 2.7, see the
<a href="https://github.com/chapel-lang/chapel/blob/release/2.7/CHANGES.md" rel="noopener" target="_blank">CHANGES.md</a>
file.  And a big thanks to <a href="https://github.com/chapel-lang/chapel/blob/release/2.7/CONTRIBUTORS.md" rel="noopener" target="_blank">everyone who
contributed</a>
to version 2.7!</p>
<h3 id="using-vector-libraries">
<a href="#using-vector-libraries">Using vector libraries</a>
</h3>
<p>One of the nice performance-oriented features added in this release
improves the vectorization capabilities of the Chapel compiler
through vector math libraries.  Chapel already does a good job of
<span class="sidenote"><label class="sidenote-label" for="sidenote-1">vectorizing code</label><input class="sidenote-checkbox" id="sidenote-1" type="checkbox"/><span class="sidenote-content sidenote-right"><span class="sidenote-delimiter">[note:</span><em>Vectorization</em> is turning
scalar code into vector code to make use of modern CPUs’ SIMD
capabilities.<span class="sidenote-delimiter">]</span></span></span>, particularly when making use of vector
math libraries such as Libmvec or SVML to accelerate math-heavy
code.  However, using such libraries has traditionally not been a
very user-friendly experience, requiring users to specify low-level
C/LLVM flags to enable this extra performance.</p>
<p>In this release, we added <code>--vector-library</code>, a new Chapel compiler
flag that makes it easy to enable vector math libraries in Chapel
programs. This flag takes one argument providing the name of the
vector library to use. For example, to use Libmvec on x86 systems,
you can compile your program like so:</p>
<div class="highlight"><pre class="chroma" tabindex="0"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> chpl --fast --no-ieee-float --vector-library LIBMVEC-X86 myBenchmark.chpl
</span></span></code></pre></div><p>This makes it easier to vectorize code like the following example, which
raises each element of an array to a random scalar power:</p>
<div class="highlight" data-code-path="code/announcing-chapel-2.7.chpl" data-code-section="middle" data-code-type="main" data-start-line="1"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma" tabindex="0"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre class="chroma" tabindex="0"><code class="language-Chapel" data-lang="Chapel"><span class="line"><span class="cl"><span class="k">use</span><span class="w"> </span><span class="nx">Random</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">config</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">N</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nx">print</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">proc</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">scalar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="nx">randomStream</span><span class="p">(</span><span class="kt">real</span><span class="p">)).</span><span class="nx">next</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">Arr</span><span class="p">,</span><span class="w"> </span><span class="nx">Res</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="nx">N</span><span class="p">]</span><span class="w"> </span><span class="kt">real</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nx">fillRandom</span><span class="p">(</span><span class="nx">Arr</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nx">kernel</span><span class="p">(</span><span class="nx">Res</span><span class="p">,</span><span class="w"> </span><span class="nx">Arr</span><span class="p">,</span><span class="w"> </span><span class="nx">scalar</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="nx">print</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="nx">writeln</span><span class="p">(</span><span class="nx">Res</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">proc</span><span class="w"> </span><span class="nf">kernel</span><span class="p">(</span><span class="kd">ref</span><span class="w"> </span><span class="nx">Res</span><span class="p">,</span><span class="w"> </span><span class="nx">Arr</span><span class="p">,</span><span class="w"> </span><span class="nx">scalar</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="nx">r</span><span class="p">,</span><span class="w"> </span><span class="nx">a</span><span class="p">)</span><span class="w"> </span><span class="kd">in</span><span class="w"> </span><span class="k">zip</span><span class="p">(</span><span class="nx">Res</span><span class="p">,</span><span class="w"> </span><span class="nx">Arr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">**</span><span class="w"> </span><span class="nx">scalar</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Normally, this code would either not be vectorized at all or would
require low-level tricks to get vectorized performance.  Using
<code>--vector-library</code>, the compiler can automatically make use of
vector math libraries to enable big performance improvements.</p>
<p>Benchmarking the code above to see how much of an impact
<code>--vector-library</code> would have, we saw more than a
2<small><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>×</mo></mrow><annotation encoding="application/x-tex">\times</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord">×</span></span></span></span></small> speedup to the <code>kernel()</code> call when using
<code>--vector-library=LIBMVEC-X86</code> on a 32-core AMD EPYC 7543P
processor, as compared to compiling without a vector library.</p>
<p>The <code>--vector-library</code> flag is a new addition to Chapel’s
performance optimization toolkit, making it easier than ever to get
high-performance vectorized code. We plan to continue improving the
ergonomics of this flag in future releases by introducing
platform-independent ways of referring to the libraries without
having to embed names that are specific to the back-end compiler or
CPU (like <code>-X86</code> in the example above).</p>
<h3 id="debugging">
<a href="#debugging">Debugging</a>
</h3>
<p>A big theme of our last few releases has been improving the ability
to debug Chapel programs. For this release, we continued this focus
by making further improvements to the debugging experience.</p>
<h4 id="multi-locale-debugging">
<a href="#multi-locale-debugging">Multi-locale debugging</a>
</h4>
<p>In the Chapel 2.6 release, we introduced a new <a href="../../posts/announcing-chapel-2.6/#prototype-parallel-debugger">prototype parallel
debugger</a>
for multi-locale programs. This tool permits users to step through
their multi-locale executions in a single terminal window, setting
breakpoints and inspecting variables on any given locale.</p>
<p>This release adds support for Chapel’s <span class="sidenote"><label class="sidenote-label" for="sidenote-2">global namespace</label><input class="sidenote-checkbox" id="sidenote-2" type="checkbox"/><span class="sidenote-content sidenote-right"><span class="sidenote-delimiter">[note:</span>In Chapel, if a variable is visible within a
given scope, it is available for use by the programmer even if it is
stored on a remote locale.<span class="sidenote-delimiter">]</span></span></span> to the debugger.  This
means that while debugging a particular locale, values stored on
another locale can be inspected. Combined with the ability to
pretty-print Chapel types, as introduced in the last release,
debugging Chapel programs has never been easier.</p>
<p>As an example of this, consider the following example, which declares
an array on locale 1 and then accesses it remotely from locale 0:</p>
<div class="file" data-code-path="code/debug.chpl" data-code-type="main" data-start-line="1">
<div class="file-header">
<a download="debug.chpl" href="code/debug.chpl">debug.chpl</a>
</div>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma" tabindex="0"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma" tabindex="0"><code class="language-chapel" data-lang="chapel"><span class="line"><span class="cl"><span class="k">use</span><span class="w"> </span><span class="nx">Debugger</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">proc</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">on</span><span class="w"> </span><span class="nx">Locales</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">myArr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nx">i</span><span class="w"> </span><span class="kd">in</span><span class="w"> </span><span class="mi">1</span><span class="o">..</span><span class="mi">10</span><span class="p">]</span><span class="w"> </span><span class="nx">i</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">breakpoint</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">on</span><span class="w"> </span><span class="nx">Locales</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nx">writeln</span><span class="p">(</span><span class="nx">myArr</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nx">breakpoint</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
<p>The following screenshots illustrate a debugging session for this
program starting from the point when we hit the initial breakpoint
on locale 1 (where we already happen to be in locale 1’s context).
We start by printing <code>myArr</code>, which prints its values:</p>
<figure class="fullwide"><img src="../../posts/announcing-chapel-2.7/firstLocale.jpg"/>
</figure>
<p>We then continue execution and hit the next breakpoint.  The
debugger informs us that it was a task on locale 0 that hit this
breakpoint by printing <code>Target 0: …</code>.  We can then use <code>on 0</code> to
switch the current debugger context to locale 0 and print out
<code>myArr</code> there as well:</p>
<figure class="fullwide"><img src="../../posts/announcing-chapel-2.7/otherLocale.png"/>
</figure>
<p>Note that on locale 0, <code>myArr</code> has a type of <code>ref(_array(…))</code>,
indicating that the array we’re printing is actually a remote
reference to the array on locale 1.  Notably, we can still print its
contents despite it being stored remotely.</p>
<p>We are continuing to improve <code>chpl-parallel-debug</code> for future
releases and welcome feedback on how to make it even better.</p>
<h4 id="compiler-flags-for-debugging">
<a href="#compiler-flags-for-debugging">Compiler Flags for Debugging</a>
</h4>
<p>Another big improvement to the user experience of debugging Chapel
involves changes to the compiler’s flags for debugging.  The
previous best practice for debugging Chapel involved compiling with
debug symbols (<code>-g</code>) along with several additional flags to disable
various Chapel optimizations. Optimizations are great for
performance, but by nature they can make debugging more difficult
due to their tendency to obscure the correspondence between source
code and generated code. For example, this can lead to confusing
behavior when stepping through code or inspecting variables.  Yet,
knowing which optimizations to disable required a familiarity with
the Chapel compiler, not to mention lots of flags to be thrown,
neither of which was ideal.</p>
<p>To improve this situation, we’ve added a new compiler flag,
<code>--debug-safe-optimizations-only</code>, which disables a set of
optimizations that are known to interfere with debugging.  With this
flag, users can now compile for debugging with 2 flags:</p>
<div class="highlight"><pre class="chroma" tabindex="0"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">chpl -g --debug-safe-optimizations-only myProgram.chpl
</span></span></span></code></pre></div><p>However, even this felt <span class="sidenote"><label class="sidenote-label" for="sidenote-3">too verbose</label><input class="sidenote-checkbox" id="sidenote-3" type="checkbox"/><span class="sidenote-content sidenote-right"><span class="sidenote-delimiter">[note:</span>We pride
ourselves on simple and clear flags, like <code>--fast</code> to make your code
go fast!<span class="sidenote-delimiter">]</span></span></span>, so we adjusted the behavior of <code>--debug</code> to
imply <code>-g</code> and<br/> <code>--debug-safe-optimizations-only</code>. This means
that the preferred debugging configuration can now be achieved with
just a single flag!</p>
<div class="highlight"><pre class="chroma" tabindex="0"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">chpl --debug myProgram.chpl
</span></span></span></code></pre></div><h4 id="improved-stack-traces">
<a href="#improved-stack-traces">Improved stack traces</a>
</h4>
<p>Another aspect of debugging is being able to diagnose and fix
execution-time errors.  When a halt occurs in a Chapel program, it
can be difficult to figure out where the error occurred and what
caused it.  As an example, consider the following program, which
prints out parts of an array using different slice arguments:</p>
<div class="file" data-code-path="code/outOfBounds.chpl" data-code-type="main" data-start-line="1">
<div class="file-header">
<a download="outOfBounds.chpl" href="code/outOfBounds.chpl">outOfBounds.chpl</a>
</div>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma" tabindex="0"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma" tabindex="0"><code class="language-chapel" data-lang="chapel"><span class="line"><span class="cl"><span class="k">proc</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nx">i</span><span class="w"> </span><span class="kd">in</span><span class="w"> </span><span class="o">-</span><span class="mi">9</span><span class="o">..</span><span class="mi">9</span><span class="p">]</span><span class="w"> </span><span class="nx">i</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nx">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">sliceToString</span><span class="p">(</span><span class="nx">arr</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">5</span><span class="o">..#</span><span class="mi">6</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nx">s2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">sliceToString</span><span class="p">(</span><span class="nx">arr</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="o">..</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">#</span><span class="w"> </span><span class="mi">6</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nx">s3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">sliceToString</span><span class="p">(</span><span class="nx">arr</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="o">..#</span><span class="mi">5</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nx">writeln</span><span class="p">(</span><span class="s">"Slice 1: "</span><span class="p">,</span><span class="w"> </span><span class="nx">s1</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nx">writeln</span><span class="p">(</span><span class="s">"Slice 2: "</span><span class="p">,</span><span class="w"> </span><span class="nx">s2</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nx">writeln</span><span class="p">(</span><span class="s">"Slice 3: "</span><span class="p">,</span><span class="w"> </span><span class="nx">s3</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">proc</span><span class="w"> </span><span class="nf">sliceToString</span><span class="p">(</span><span class="nx">arr</span><span class="p">,</span><span class="w"> </span><span class="nx">slice</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">s</span><span class="p">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="kd">in</span><span class="w"> </span><span class="nx">slice</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">s</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nx">arr</span><span class="p">[</span><span class="nx">i</span><span class="p">]:</span><span class="kt">string</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">" "</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">s</span><span class="p">.</span><span class="nx">strip</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
<p>One of the slices results in an out-of-bounds array access when
compiled with <code>--checks</code> (Chapel’s default).  In Chapel 2.6, you
would get an error like this by default:</p>
<div class="highlight"><pre class="chroma" tabindex="0"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">outOfBounds.chpl:14: error: halt reached - array index out of bounds
</span></span></span><span class="line"><span class="cl"><span class="go">note: index was 10 but array bounds are -9..9
</span></span></span></code></pre></div><p>This doesn’t provide enough information to figure out <em>which</em> slice
is causing the halt.  Prior to today’s release, there are a few ways
you might figure this out:</p>
<ul>
<li>
<p>Add lots of <code>writeln()</code> statements to narrow down where the error
is occurring.</p>
</li>
<li>
<p>Run the program in a debugger, which will stop execution at the
point of the halt, permitting a backtrace to be viewed.</p>
</li>
<li>
<p>Rebuild the Chapel runtime and program with stack unwinding
enabled, causing a stack trace to be printed on halt.</p>
</li>
</ul>
<p>All of these options require extra work on the part of the user,
either by changing their program or changing their Chapel
installation.</p>
<p>To improve this, in Chapel 2.7, the default build configuration and
release formats now have stack unwinding support enabled by default.
As a result, when compiling the program above <span class="sidenote"><label class="sidenote-label" for="sidenote-4">with debugging on</label><input class="sidenote-checkbox" id="sidenote-4" type="checkbox"/><span class="sidenote-content sidenote-right"><span class="sidenote-delimiter">[note:</span>Note that compiling without debugging will
also result in a stack trace, simply one with potentially less
precise line number information.<span class="sidenote-delimiter">]</span></span></span> and running it:</p>
<div class="highlight"><pre class="chroma" tabindex="0"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> chpl --debug outOfBounds.chpl
</span></span><span class="line"><span class="cl"><span class="gp">$</span> ./outOfBounds
</span></span></code></pre></div><p>the following stack trace is now printed upon hitting the error:</p>
<div class="highlight"><pre class="chroma" tabindex="0"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">outOfBounds.chpl:14: error: halt reached - array index out of bounds
</span></span></span><span class="line"><span class="cl"><span class="go">note: index was 10 but array bounds are -9..9
</span></span></span><span class="line"><span class="cl"><span class="go">Stacktrace
</span></span></span><span class="line"><span class="cl"><span class="go"></span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="go">halt() at $CHPL_HOME/modules/standard/Errors.chpl:762
</span></span></span><span class="line"><span class="cl"><span class="go">checkAccess() at $CHPL_HOME/modules/internal/ChapelArray.chpl:873
</span></span></span><span class="line"><span class="cl"><span class="go">this() at $CHPL_HOME/modules/internal/ChapelArray.chpl:1002
</span></span></span><span class="line"><span class="cl"><span class="go">this() at $CHPL_HOME/modules/internal/ChapelArray.chpl:1036
</span></span></span><span class="line"><span class="cl"><span class="go">printSlice() at outOfBounds.chpl:14
</span></span></span><span class="line"><span class="cl"><span class="go">main() at outOfBounds.chpl:4
</span></span></span><span class="line"><span class="cl"><span class="go"></span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="go">Disable full stacktrace by setting 'CHPL_RT_UNWIND=0'
</span></span></span></code></pre></div><p>This stack trace shows the call chain that led to the halt, making
it much easier to identify the source of the error. Specifically, it
points to the slice on line four, <code>0.. by 2 # 6</code>, as the culprit for
the bug.  By eliminating the need for extra steps to get a stack
trace, we hope that diagnosing runtime errors in Chapel programs
becomes easier than ever!</p>
<h3 id="mason-improvements">
<a href="#mason-improvements">Mason Improvements</a>
</h3>
<p>Chapel 2.7 includes a slew of improvements to Mason, Chapel’s
package manager. The first highlight is better integration with
Chapel’s ever-growing tooling support.  In Chapel 2.6, VSCode users
had to take additional steps to configure the language server so
that it could recognize a Mason package’s structure. Without that
additional step, users would get errors about the Chapel compiler
not being able to find a module included in the Mason package, like
the following::</p>
<figure class="fullwide"><img src="../../posts/announcing-chapel-2.7/mason-cls-26.png"/>
</figure>
<p>With Chapel 2.7, the additional step for Mason packages is no longer
necessary.  Compare the screenshot using Chapel 2.7 below with the
one above to see the difference!</p>
<figure class="fullwide"><img src="../../posts/announcing-chapel-2.7/mason-cls-27.png"/>
</figure>
<p>Another new Mason feature is support for <em>prerequisites</em>.  This
feature supports code in other languages that needs to be compiled
or bootstrapped in some way before compiling the Chapel code for the
Mason application or library. A common use case for prerequisites is
to bundle some C code that a Chapel-based library would call into
via interoperability. With the Chapel 2.7 version of Mason, package
implementers can add code in other languages to be compiled
alongside the Chapel code.</p>
<p>The initial implementation for prerequisites involves extending
Mason’s standard directory structure to specify prerequisites, how
to build them, and how to incorporate them into the Chapel
compiler’s command-line.  For example, a Mason package with a
C-based prerequisite might use a directory structure like this:</p>
<pre tabindex="0"><code>MyMasonPackage/
├── src/
│   └── MyMasonPackage.chpl
├── prereqs/
│   └── SomePrereq/
│       └── code.c
│       └── header.h
│       └── Makefile
└── Mason.toml
</code></pre><p>To learn more about this new feature, check out the new section of
Mason’s documentation, <a href="https://chapel-lang.org/docs/2.7/tools/mason/guide/prereqs.html" rel="noopener" target="_blank">Building Code in Other
Languages</a>.
Meanwhile, we’re working on further generalizations to supporting
prerequisites.  <a href="https://github.com/chapel-lang/chapel/issues/28174" rel="noopener" target="_blank">Issue
#28174</a> captures
some of our ideas, and we are interested in receiving your comments
about the feature there as well.</p>
<p>Finally, two additional package management highlights in Chapel 2.7
are that Mason performance has improved significantly, and we have
started to modernize Mason’s integration with
<a href="https://spack.io/" rel="noopener" target="_blank">Spack</a>, a popular package manager designed for
HPC.</p>
<h3 id="improvements-to-the-dyno-compiler-front-end">
<a href="#improvements-to-the-dyno-compiler-front-end">Improvements to the Dyno Compiler Front-End</a>
</h3>
<p>As you may have seen in <a href="../../posts/announcing-chapel-2.6/#improvements-to-the-dyno-compiler-front-end">previous</a> <a href="../../posts/announcing-chapel-2.5/#improvements-to-the-dyno-compiler-front-end">release</a>
<a href="../../posts/announcing-chapel-2.4/#dyno-support-for-chapel-features">announcements</a>, <em>Dyno</em> is
the name of our project that is modernizing and improving the Chapel compiler.
Dyno improves error messages, allows incremental type resolution,
and enables the <a href="../../posts/chapel-py/">development of language tooling</a>.  Among the major wins for this ongoing effort is
the <a href="https://chapel-lang.org/docs/2.7/tools/chpl-language-server/chpl-language-server.html" rel="noopener" target="_blank">Chapel Language Server
(CLS)</a>,
which was previously featured in a <a href="../../posts/chapel-lsp/">blog post about editor
integration</a>, not to mention Chapel’s
linter, VSCode support, and <code>chpldoc</code>.</p>
<p>Our team has been hard at work implementing many features of
Chapel’s type system in Dyno, which, among other things, will
enable tools like CLS to provide more accurate and helpful
information to users.  In the 2.7 release, we have continued to
improve Dyno’s support for Chapel’s language features, and we’ve
also expanded the compiler’s ability to leverage the Dyno front-end
to generate executable code.</p>
<h4 id="more-language-features">
<a href="#more-language-features">More Language Features</a>
</h4>
<p>Dyno’s resolver for types and calls has seen the usual steady stream
of improvements. In this release, some notable changes include:</p>
<ul>
<li>
<p>improvements for array formals and array formal type queries</p>
</li>
<li>
<p>support for more compiler-generated casts</p>
</li>
<li>
<p>improvements to <span class="sidenote"><label class="sidenote-label" for="sidenote-5">split-initialization</label><input class="sidenote-checkbox" id="sidenote-5" type="checkbox"/><span class="sidenote-content sidenote-right"><span class="sidenote-delimiter">[note:</span><em>Split
initialization</em> is a feature that permits a variable’s
initialization to take place in a distinct statement that follows
the variable’s declaration.<span class="sidenote-delimiter">]</span></span></span> of variables</p>
</li>
</ul>
<p>The following screenshots show an editing session in which
Dyno-inferred information is rendered in-line using blue text when
editing the corresponding code examples. The first example focuses
on array formals:</p>
<p>
<div class="file" data-code-path="code/array-formals.chpl" data-code-type="main" data-start-line="1">
<details>
<summary class="file-header">
<a download="array-formals.chpl" href="code/array-formals.chpl">array-formals.chpl</a>
</summary>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma" tabindex="0"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma" tabindex="0"><code class="language-chapel" data-lang="chapel"><span class="line"><span class="cl"><span class="k">proc</span><span class="w"> </span><span class="nf">foo</span><span class="p">(</span><span class="nx">A</span><span class="p">:</span><span class="w"> </span><span class="p">[?</span><span class="nx">D</span><span class="p">]</span><span class="w"> </span><span class="p">?</span><span class="nx">t</span><span class="p">)</span><span class="w"> </span><span class="kd">param</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">param</span><span class="w"> </span><span class="nx">isRect</span><span class="w"> </span><span class="o">=</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">A</span><span class="p">.</span><span class="nx">isDefaultRectangular</span><span class="p">()</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="s">"rectangular"</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s">"not rectangular"</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">param</span><span class="w"> </span><span class="nx">eltType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">A</span><span class="p">.</span><span class="nx">eltType</span><span class="p">:</span><span class="kt">string</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">param</span><span class="w"> </span><span class="nx">dim</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">D</span><span class="p">.</span><span class="nx">rank</span><span class="p">:</span><span class="kt">string</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">isRect</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">" "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">dim</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">"-dimensional array of "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">eltType</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">use</span><span class="w"> </span><span class="nx">BlockDist</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">var</span><span class="w"> </span><span class="nx">A</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="mi">10</span><span class="p">]</span><span class="w"> </span><span class="kt">int</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">var</span><span class="w"> </span><span class="nx">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">blockDist</span><span class="p">.</span><span class="nx">createArray</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="o">..</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="kt">real</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">param</span><span class="w"> </span><span class="nx">infoA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">foo</span><span class="p">(</span><span class="nx">A</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">param</span><span class="w"> </span><span class="nx">infoB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">foo</span><span class="p">(</span><span class="nx">B</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div>
</details>
</div>
<figure class="fullwide"><img alt="Dyno displaying inferred type information for array formals" src="../../posts/announcing-chapel-2.7/dyno-array-formals.png"/>
</figure>
</p>
<p>In the example above, we use the same generic function <code>foo()</code> to
accept both a regular (“default rectangular”) array and a
block-distributed array.  Both of these arrays are accepted as
usual, and queries in the formal type extract the domain and element
type information. The <code>infoA</code> and <code>infoB</code> variables therefore
contain accurate descriptions of the arrays passed to <code>foo()</code>.</p>
<p>The next example demonstrates new support for compiler-generated
casts.</p>
<p>
<div class="file" data-code-path="code/casts.chpl" data-code-type="main" data-start-line="1">
<details>
<summary class="file-header">
<a download="casts.chpl" href="code/casts.chpl">casts.chpl</a>
</summary>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma" tabindex="0"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma" tabindex="0"><code class="language-chapel" data-lang="chapel"><span class="line"><span class="cl"><span class="k">enum</span><span class="w"> </span><span class="nx">color</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">red</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nx">green</span><span class="p">,</span><span class="w"> </span><span class="nx">blue</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">var</span><span class="w"> </span><span class="nx">myTup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mi">42</span><span class="p">,</span><span class="w"> </span><span class="s">"hello"</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">var</span><span class="w"> </span><span class="nx">castTup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">myTup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="kt">real</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">param</span><span class="w"> </span><span class="nx">redBytes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">color</span><span class="p">.</span><span class="nx">red</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kt">bytes</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div>
</details>
</div>
<figure class="fullwide"><img alt="Dyno displaying inferred type information for generated casts" src="../../posts/announcing-chapel-2.7/dyno-casts.png"/>
</figure>
</p>
<p>A cast from an integer-string tuple is performed to create a real-integer
tuple, casting the integer to a real and the string to an integer. Also, a
cast from an enum constant of type <code>color</code> is converted to a <code>param</code> value of
type <code>bytes</code>. Finally, notice that the language server is also showing the
inferred numeric values corresponding to the enum constants (<code>2</code> for <code>green</code>
and <code>3</code> for <code>blue</code>).</p>
<h4 id="generating-executable-code">
<a href="#generating-executable-code">Generating Executable Code</a>
</h4>
<p>This release also saw improvements to our support for using
Dyno to generate executable code, which is a major step toward
Dyno’s goal of replacing the front-end of the production
compiler. This is an ongoing process that involves taking the
information that Dyno has computed about the program and generating
AST for the production compiler, essentially skipping over its
historical type resolution and analysis phases. This capability is
enabled using the <code>--dyno</code> command-line flag.</p>
<p>Initial support is limited to a subset of Chapel’s language
features, but is growing all the time.  Here is an example program
and helper module that Dyno can now compile, demonstrating uses of
language features like <code>param</code> for-loops and grouped variable initialization.
This program also demonstrates Dyno’s ability to compile standard module
code, like that found in Chapel’s <code>IO</code> module. This represents a
significant step forward in Dyno’s ability to compile real-world Chapel code:</p>
<div class="file" data-code-path="code/converter.chpl" data-code-type="main" data-start-line="1">
<div class="file-header">
<a download="converter.chpl" href="code/converter.chpl">converter.chpl</a>
</div>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma" tabindex="0"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre class="chroma" tabindex="0"><code class="language-chapel" data-lang="chapel"><span class="line"><span class="cl"><span class="k">use</span><span class="w"> </span><span class="nx">IO</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">use</span><span class="w"> </span><span class="nx">Print</span><span class="p">;</span><span class="w"> </span><span class="c1">// helper module while we work toward resolving more of IO
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// utilize generic varargs and param for-loops to mimic 'writeln' behavior
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">proc</span><span class="w"> </span><span class="nf">myWriteln</span><span class="p">(</span><span class="kd">const</span><span class="w"> </span><span class="nx">args</span><span class="o">..</span><span class="p">.?</span><span class="nx">n</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="kd">param</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="kd">in</span><span class="w"> </span><span class="mi">0</span><span class="o">..&lt;</span><span class="nx">n</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">print</span><span class="p">(</span><span class="nx">args</span><span class="p">(</span><span class="nx">i</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nx">println</span><span class="p">(</span><span class="s">""</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// return a tuple from a procedure
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">proc</span><span class="w"> </span><span class="nf">double</span><span class="p">(</span><span class="nx">arg</span><span class="p">:</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="nx">arg</span><span class="p">,</span><span class="w"> </span><span class="nx">arg</span><span class="o">*</span><span class="mi">2</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">proc</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c1">// uses generic varargs and a param for-loop to mimic 'writeln' behavior
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">  </span><span class="nx">myWriteln</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">" != "</span><span class="p">,</span><span class="w"> </span><span class="mf">2.0</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c1">// grouped variable initialization, unpacking the result of 'double'
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">double</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nx">myWriteln</span><span class="p">(</span><span class="s">"a = "</span><span class="p">,</span><span class="w"> </span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="s">", b = "</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c1">// Open 'stdout' and use the IO module to write a string!
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">  </span><span class="c1">//
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">  </span><span class="c1">// Utilizes shared objects, ranges, generic types, enums, interoperability,
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">  </span><span class="c1">// and a great deal of string manipulating-module code.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nx">file</span><span class="p">(</span><span class="nx">chpl_cstdout</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">w</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">s</span><span class="p">.</span><span class="nx">writer</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nx">w</span><span class="p">.</span><span class="nx">writeLiteral</span><span class="p">(</span><span class="s">"Hello, World!\n"</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
<div class="file" data-code-path="code/Print.chpl" data-code-type="main" data-start-line="1">
<details>
<summary class="file-header">
<a download="Print.chpl" href="code/Print.chpl">Print.chpl</a>
</summary>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma" tabindex="0"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span><span class="lnt">90
</span><span class="lnt">91
</span><span class="lnt">92
</span></code></pre></td>
<td class="lntd">
<pre class="chroma" tabindex="0"><code class="language-chapel" data-lang="chapel"><span class="line"><span class="cl"><span class="k">use</span><span class="w"> </span><span class="nx">Types</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">use</span><span class="w"> </span><span class="nx">CTypes</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">extern</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">#</span><span class="nx">include</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">stdint</span><span class="p">.</span><span class="nx">h</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">#</span><span class="nx">include</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">inttypes</span><span class="p">.</span><span class="nx">h</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">#</span><span class="nx">include</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">stdio</span><span class="p">.</span><span class="nx">h</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="o">#</span><span class="nx">include</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">stdbool</span><span class="p">.</span><span class="nx">h</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nx">printMyChar</span><span class="p">(</span><span class="nx">int8_t</span><span class="w"> </span><span class="nx">x</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nx">printMyInt64</span><span class="p">(</span><span class="nx">int64_t</span><span class="w"> </span><span class="nx">x</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nx">printMyUint64</span><span class="p">(</span><span class="nx">uint64_t</span><span class="w"> </span><span class="nx">x</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nx">printMyReal64</span><span class="p">(</span><span class="nx">double</span><span class="w"> </span><span class="nx">x</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nx">printMyBool</span><span class="p">(</span><span class="kt">bool</span><span class="w"> </span><span class="nx">x</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nx">printStr</span><span class="p">(</span><span class="kd">const</span><span class="w"> </span><span class="nx">char</span><span class="o">*</span><span class="w"> </span><span class="nx">str</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nx">printMyInt64</span><span class="p">(</span><span class="nx">int64_t</span><span class="w"> </span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">printf</span><span class="p">(</span><span class="s">"%"</span><span class="w"> </span><span class="nx">PRId64</span><span class="p">,</span><span class="w"> </span><span class="nx">x</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nx">printMyUint64</span><span class="p">(</span><span class="nx">uint64_t</span><span class="w"> </span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">printf</span><span class="p">(</span><span class="s">"%"</span><span class="w"> </span><span class="nx">PRIu64</span><span class="p">,</span><span class="w"> </span><span class="nx">x</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nx">printMyReal64</span><span class="p">(</span><span class="nx">double</span><span class="w"> </span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">printf</span><span class="p">(</span><span class="s">"%lf"</span><span class="p">,</span><span class="w"> </span><span class="nx">x</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nx">printMyChar</span><span class="p">(</span><span class="nx">int8_t</span><span class="w"> </span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">printf</span><span class="p">(</span><span class="s">"%c"</span><span class="p">,</span><span class="w"> </span><span class="nx">x</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nx">printMyBool</span><span class="p">(</span><span class="kt">bool</span><span class="w"> </span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nx">printf</span><span class="p">(</span><span class="s">"true"</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nx">printf</span><span class="p">(</span><span class="s">"false"</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nx">printStr</span><span class="p">(</span><span class="kd">const</span><span class="w"> </span><span class="nx">char</span><span class="o">*</span><span class="w"> </span><span class="nx">str</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">printf</span><span class="p">(</span><span class="s">"%s"</span><span class="p">,</span><span class="w"> </span><span class="nx">str</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">extern</span><span class="w"> </span><span class="k">proc</span><span class="w"> </span><span class="nf">printMyChar</span><span class="p">(</span><span class="nx">x</span><span class="p">:</span><span class="w"> </span><span class="kt">real</span><span class="p">(</span><span class="mi">64</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">extern</span><span class="w"> </span><span class="k">proc</span><span class="w"> </span><span class="nf">printMyInt64</span><span class="p">(</span><span class="nx">x</span><span class="p">:</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="mi">64</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">extern</span><span class="w"> </span><span class="k">proc</span><span class="w"> </span><span class="nf">printMyUint64</span><span class="p">(</span><span class="nx">x</span><span class="p">:</span><span class="w"> </span><span class="kt">uint</span><span class="p">(</span><span class="mi">64</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">extern</span><span class="w"> </span><span class="k">proc</span><span class="w"> </span><span class="nf">printMyReal64</span><span class="p">(</span><span class="nx">x</span><span class="p">:</span><span class="w"> </span><span class="kt">real</span><span class="p">(</span><span class="mi">64</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">extern</span><span class="w"> </span><span class="k">proc</span><span class="w"> </span><span class="nf">printMyBool</span><span class="p">(</span><span class="nx">x</span><span class="p">:</span><span class="w"> </span><span class="kt">bool</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">extern</span><span class="w"> </span><span class="k">proc</span><span class="w"> </span><span class="nf">printStr</span><span class="p">(</span><span class="nx">str</span><span class="p">:</span><span class="w"> </span><span class="nx">c_ptrConst</span><span class="p">(</span><span class="nx">c_char</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">proc</span><span class="w"> </span><span class="nf">doPrintSpace</span><span class="p">()</span><span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="nx">printMyChar</span><span class="p">(</span><span class="mi">32</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">proc</span><span class="w"> </span><span class="nf">doPrintNewline</span><span class="p">()</span><span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="nx">printMyChar</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">proc</span><span class="w"> </span><span class="nf">print</span><span class="p">(</span><span class="nx">x</span><span class="p">:</span><span class="w"> </span><span class="p">?</span><span class="nx">t</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="nx">t</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">printMyBool</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nx">isIntType</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">printMyInt64</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nx">isUintType</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">printMyUint64</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nx">isRealType</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">printMyReal64</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nx">t</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">printStr</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">c_str</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nx">t</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nx">c_ptrConst</span><span class="p">(</span><span class="nx">c_char</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">printStr</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nx">isTupleType</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// TODO: Param loop this...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="c1">// TODO: Move this to 'print'...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">x</span><span class="p">.</span><span class="nx">size</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="nx">print</span><span class="p">(</span><span class="nx">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">x</span><span class="p">.</span><span class="nx">size</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">doPrintSpace</span><span class="p">();</span><span class="w"> </span><span class="nx">print</span><span class="p">(</span><span class="nx">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">x</span><span class="p">.</span><span class="nx">size</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">doPrintSpace</span><span class="p">();</span><span class="w"> </span><span class="nx">print</span><span class="p">(</span><span class="nx">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">x</span><span class="p">.</span><span class="nx">size</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">doPrintSpace</span><span class="p">();</span><span class="w"> </span><span class="nx">print</span><span class="p">(</span><span class="nx">x</span><span class="p">[</span><span class="mi">3</span><span class="p">]);</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">x</span><span class="p">.</span><span class="nx">size</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">doPrintSpace</span><span class="p">();</span><span class="w"> </span><span class="nx">print</span><span class="p">(</span><span class="nx">x</span><span class="p">[</span><span class="mi">4</span><span class="p">]);</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">x</span><span class="p">.</span><span class="nx">size</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">doPrintSpace</span><span class="p">();</span><span class="w"> </span><span class="nx">print</span><span class="p">(</span><span class="nx">x</span><span class="p">[</span><span class="mi">5</span><span class="p">]);</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">x</span><span class="p">.</span><span class="nx">size</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">doPrintSpace</span><span class="p">();</span><span class="w"> </span><span class="nx">print</span><span class="p">(</span><span class="nx">x</span><span class="p">[</span><span class="mi">6</span><span class="p">]);</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">x</span><span class="p">.</span><span class="nx">size</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">doPrintSpace</span><span class="p">();</span><span class="w"> </span><span class="nx">print</span><span class="p">(</span><span class="nx">x</span><span class="p">[</span><span class="mi">7</span><span class="p">]);</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">x</span><span class="p">.</span><span class="nx">size</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">9</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">doPrintSpace</span><span class="p">();</span><span class="w"> </span><span class="nx">print</span><span class="p">(</span><span class="nx">x</span><span class="p">[</span><span class="mi">8</span><span class="p">]);</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nx">isEnumType</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">temp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">chpl__enumToOrder</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">printMyInt64</span><span class="p">(</span><span class="nx">temp</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// TODO: 'halt()'
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">proc</span><span class="w"> </span><span class="nf">println</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nx">print</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nx">doPrintNewline</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div>
</details>
</div>
<p>The program above can be <span class="sidenote"><label class="sidenote-label" for="sidenote-6">compiled</label><input class="sidenote-checkbox" id="sidenote-6" type="checkbox"/><span class="sidenote-content sidenote-right"><span class="sidenote-delimiter">[note:</span>The <code>--no-checks</code> flag is used here to disable runtime checks that
utilize language features not yet supported by Dyno’s code generation.<span class="sidenote-delimiter">]</span></span></span>
with <code>--dyno --no-checks</code> to produce an executable that prints the
following output:</p>
<div class="file" data-code-path="code/converter.good" data-code-type="main" data-start-line="1">
<div class="file-header">
<a download="converter.good" href="code/converter.good">converter.good</a>
</div>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma" tabindex="0"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma" tabindex="0"><code class="language-text" data-lang="text"><span class="line"><span class="cl">1 != 2.000000
</span></span><span class="line"><span class="cl">a = 5, b = 10
</span></span><span class="line"><span class="cl">Hello, World!
</span></span></code></pre></td></tr></table>
</div>
</div>
</div>
<p>Looking ahead, we plan to continue expanding the set of supported
language features and standard modules that Dyno can compile. In the
near term we will be directing our focus to fully resolving
<code>writeln()</code> itself, and tackling additional core language features
like iterators and error handling.</p>
<p>Stay tuned as we continue to add support for more features to Dyno!</p>
<h3 id="for-more-information">
<a href="#for-more-information">For More Information</a>
</h3>
<p>If you have questions about Chapel 2.7 or any of its new features,
please reach out on Chapel’s <a href="https://discord.gg/xu2xg45yqH" rel="noopener" target="_blank">Discord
channel</a>, <a href="https://chapel.discourse.group/" rel="noopener" target="_blank">Discourse
group</a>, or one of our other
<a href="https://chapel-lang.org/forums/" rel="noopener" target="_blank">community forums</a>.  We’re also
always interested in hearing about how we can make the Chapel
language, libraries, implementation, and tools more useful to you.</p>
</div>
</main>
<div class="container">
<div class="share-view">
<h3>Share this article:</h3>
<div class="share-buttons">
<a class="button share-button" href="https://bsky.app/intent/compose?text=Check+out+this+post+entitled+%22Announcing+Chapel+2.7%21%22+on+the+Chapel+Programming+Language+blog%3A+https%3A%2F%2Fchapel-lang.org%2Fblog%2Fposts%2Fannouncing-chapel-2.7%2F" rel="noopener noreferrer" style="--button-color: #6cb0f9; --button-color-light: white;" target="_blank">
<img alt="Share on BlueSky" height="30" src="../../img/bluesky-logo.jpg" width="30"/>
</a>
<a class="button share-button" href="https://www.facebook.com/sharer/sharer.php?description=Check+out+this+post+entitled+%22Announcing+Chapel+2.7%21%22+on+the+Chapel+Programming+Language+blog%3A&amp;u=https%3A%2F%2Fchapel-lang.org%2Fblog%2Fposts%2Fannouncing-chapel-2.7%2F" rel="noopener noreferrer" style="--button-color: #3a559f; --button-color-light: white;" target="_blank">
<img alt="Share on Facebook" height="30" src="../../img/facebook-logo.png" width="30"/>
</a>
<a class="button share-button" href="https://linkedin.com/share?text=Check+out+this+post+entitled+%22Announcing+Chapel+2.7%21%22+on+the+Chapel+Programming+Language+blog%3A&amp;url=https%3A%2F%2Fchapel-lang.org%2Fblog%2Fposts%2Fannouncing-chapel-2.7%2F" rel="noopener noreferrer" style="--button-color: #2867b2; --button-color-light: white;" target="_blank">
<img alt="Share on LinkedIn" height="30" src="../../img/linkedin-logo.png" width="30"/>
</a>
<a class="button share-button" href="https://new.reddit.com/submit?title=Announcing+Chapel+2.7%21&amp;url=https%3A%2F%2Fchapel-lang.org%2Fblog%2Fposts%2Fannouncing-chapel-2.7%2F" rel="noopener noreferrer" style="--button-color: #ff4500; --button-color-light: white;" target="_blank">
<img alt="Share on Reddit" height="30" src="../../img/reddit-logo.svg" width="30"/>
</a>
<a class="button share-button" href="http://x.com/share?text=Check+out+this+post+entitled+%22Announcing+Chapel+2.7%21%22+on+the+Chapel+Programming+Language+blog%3A&amp;url=https%3A%2F%2Fchapel-lang.org%2Fblog%2Fposts%2Fannouncing-chapel-2.7%2F" rel="noopener noreferrer" style="--button-color: #000000; --button-color-light: #7a7a7a;" target="_blank">
<img alt="Share on X" height="30" src="../../img/x-logo.svg" width="30"/>
</a>
</div>
</div>
</div>
</body>
</html>
