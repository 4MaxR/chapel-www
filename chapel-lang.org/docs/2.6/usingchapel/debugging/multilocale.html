

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Debugging Multilocale Code &mdash; Chapel Documentation 2.6</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/style.css?v=70f659a1" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=ae39cb24"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Debugging Memory-related Issues" href="memory.html" />
    <link rel="prev" title="Running in gdb/lldb with a Launcher" href="launchers.html" />
   
  

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

<a href="../../index.html" class="icon icon-home"> Chapel Documentation

<!-- display version if button won't be rendered -->
<?php if (false) { ?>
<br>2.6
<?php } ?>

</a>

<?php
// Variables given by sphinx
$chplTitle = "2.6";
$pagename = "usingchapel/debugging/multilocale";
include "../..//versionButton.php";
?>


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
              <p class="caption" role="heading"><span class="caption-text">Compiling and Running Chapel</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../QUICKSTART.html">Quickstart Instructions</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Using Chapel</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../portability.html">Where can I use Chapel?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../prereqs.html">Chapel Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../chplenv.html">Setting up Your Environment for Chapel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../building.html">Building Chapel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../compiling.html">Compiling Chapel Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../editor-support.html">Editor Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../man.html">Chapel Man Page</a></li>
<li class="toctree-l2"><a class="reference internal" href="../executing.html">Executing Chapel Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../multilocale.html">Multilocale Chapel Execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../launcher.html">Chapel Launchers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tasks.html">Chapel Tasks</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../debugging.html">Debugging Chapel Programs</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="bkc.html">Best Known Configurations for Debugging</a></li>
<li class="toctree-l3"><a class="reference internal" href="launchers.html">Running in gdb/lldb with a Launcher</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Debugging Multilocale Code</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#chpl-parallel-dbg">chpl-parallel-dbg</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gdb4hpc">gdb4hpc</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="memory.html">Debugging Memory-related Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="tasks.html">Debugging Multithreaded Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="sanitizers.html">Sanitizers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../debugging.html#useful-debug-features">Useful Debug Features</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../bugs.html">Reporting Chapel Issues</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../platforms/index.html">Platform-Specific Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../technotes/index.html">Technical Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/index.html">Docs for Contributors</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Writing Chapel Programs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../language/reference.html">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/index.html">Hello World Variants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../primers/index.html">Primers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../language/spec/index.html">Language Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/standard.html">Standard Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/packages.html">Package Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/layoutdist.html">Standard Layouts and Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mason-packages/index.html">Mason Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../users-guide/index.html">Chapel Users Guide (WIP)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Language History</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../language/evolution.html">Chapel Evolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../language/archivedSpecs.html">Documentation Archives</a></li>
</ul>

  <p class="caption" role="heading"><span class="caption-text">Indexes</span></p>
  <ul>
    <li class="toctree-11"><a class="reference internal" href="../../chpl-modindex.html">Chapel Module Index</a></li>
    <li class="toctree-11"><a class="reference internal" href="../../genindex.html">Complete Docs Index</a></li>
  </ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Chapel Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Using Chapel</a></li>
          <li class="breadcrumb-item"><a href="../debugging.html">Debugging Chapel Programs</a></li>
      <li class="breadcrumb-item active">Debugging Multilocale Code</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/usingchapel/debugging/multilocale.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="debugging-multilocale-code">
<h1>Debugging Multilocale Code<a class="headerlink" href="#debugging-multilocale-code" title="Link to this heading"></a></h1>
<p>Debugging multilocale programs is more complex than debugging
single-locale programs. Most techniques for doing this end up boiling down to
running a debugger instance for each locale. See <a class="reference internal" href="launchers.html#debugging-with-launchers"><span class="std std-ref">these docs</span></a> which describe how to achieve this very explicitly
with multiple windows.</p>
<p>The rest of this page describes some other tools that can help with debugging
multilocale code.</p>
<section id="chpl-parallel-dbg">
<h2>chpl-parallel-dbg<a class="headerlink" href="#chpl-parallel-dbg" title="Link to this heading"></a></h2>
<p>chpl-parallel-dbg is a tool that is bundled with Chapel to debug multilocale
programs. This tool serves as a wrapper around <code class="docutils literal notranslate"><span class="pre">lldb</span></code>.</p>
<section id="requirements">
<h3>Requirements<a class="headerlink" href="#requirements" title="Link to this heading"></a></h3>
<p>To use <code class="docutils literal notranslate"><span class="pre">chpl-parallel-dbg</span></code>, all you need to do is run <code class="docutils literal notranslate"><span class="pre">make</span>
<span class="pre">chpl-parallel-dbg</span></code> in the Chapel source directory. This will build the tool
and place it in the <code class="docutils literal notranslate"><span class="pre">bin</span></code> directory next to the Chapel compiler. You can then
use it to debug your multilocale programs.</p>
</section>
<section id="usage">
<h3>Usage<a class="headerlink" href="#usage" title="Link to this heading"></a></h3>
<p>After having built your Chapel multilocale Chapel program (see
<a class="reference internal" href="#chpl-parallel-dbg-limitations"><span class="std std-ref">Limitations</span></a>), you just need to run the program as
follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./&lt;program&gt;<span class="w"> </span>-nl<span class="w"> </span>&lt;numLocales&gt;<span class="w"> </span>--lldb
</pre></div>
</div>
<p>This will launch the program, start up a few <code class="docutils literal notranslate"><span class="pre">lldb-server</span></code> instances, and
then wait.</p>
<p>From another window, you can then run the following command to connect to the
<code class="docutils literal notranslate"><span class="pre">lldb-server</span></code> instances:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>chpl-parallel-dbg<span class="w"> </span>&lt;program&gt;<span class="w"> </span>&lt;numLocales&gt;
</pre></div>
</div>
<p>This will create setup a <code class="docutils literal notranslate"><span class="pre">lldb</span></code> session, and create a target per locale. You
can then use <code class="docutils literal notranslate"><span class="pre">lldb</span></code> commands to debug the program as you would normally.
However, its important to remember that you are essentially debugging multiple
processes at once (however many locales you specified). This means that when you
step through the code, set breakpoints, print variables, you will only be doing
so for the current locale. To switch to another locale, you can use the
<code class="docutils literal notranslate"><span class="pre">on</span> <span class="pre">&lt;localeNum&gt;</span></code> (an alias for <code class="docutils literal notranslate"><span class="pre">target</span> <span class="pre">select</span> <span class="pre">`&lt;localeNum&gt;</span></code>) command in
<code class="docutils literal notranslate"><span class="pre">lldb</span></code> to switch to a different target.</p>
<p>For example, to switch to locale 1 and print the value of a variable called
<code class="docutils literal notranslate"><span class="pre">x</span></code>, you would run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>lldb<span class="o">)</span><span class="w"> </span>on<span class="w"> </span><span class="m">1</span>
<span class="o">(</span>lldb<span class="o">)</span><span class="w"> </span>print<span class="w"> </span>x
</pre></div>
</div>
</section>
<section id="limitations">
<span id="chpl-parallel-dbg-limitations"></span><h3>Limitations<a class="headerlink" href="#limitations" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">chpl-parallel-dbg</span></code> currently only works with <code class="docutils literal notranslate"><span class="pre">CHPL_COMM=gasnet</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">chpl-parallel-dbg</span></code> has only been tested with <code class="docutils literal notranslate"><span class="pre">CHPL_COMM_SUBSTRATE=smp</span></code> and
<code class="docutils literal notranslate"><span class="pre">CHPL_COMM_SUBSTRATE=udp</span></code> (running oversubscribed on a single node).</p></li>
<li><p>Running large numbers of locales can become unwieldy, so it is recommended to
use this tool with a small number of locales.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">chpl-parallel-dbg</span></code> currently only supports <code class="docutils literal notranslate"><span class="pre">CHPL_TARGET_PLATFORM=linux64</span></code>.</p></li>
</ul>
</section>
</section>
<section id="gdb4hpc">
<h2>gdb4hpc<a class="headerlink" href="#gdb4hpc" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://cpe.ext.hpe.com/docs/latest/debugging-tools/gdb4hpc/man/gdb4hpc.1.html">gdb4hpc</a> is a proprietary tool offered by HPE for debugging distributed
programs. It is mostly used for debugging MPI programs, but can in theory be
used for debugging Chapel programs as well.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="launchers.html" class="btn btn-neutral float-left" title="Running in gdb/lldb with a Launcher" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="memory.html" class="btn btn-neutral float-right" title="Debugging Memory-related Issues" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Hewlett Packard Enterprise Development LP.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 



</body>
</html>