

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Best Known Configurations for Debugging &mdash; Chapel Documentation 2.7</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/style.css?v=70f659a1" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=dfec817d"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Running in gdb/lldb with a Launcher" href="launchers.html" />
    <link rel="prev" title="Debugging Chapel Programs" href="../debugging.html" />
   
  

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

<a href="../../index.html" class="icon icon-home"> Chapel Documentation

<!-- display version if button won't be rendered -->
<?php if (false) { ?>
<br>2.7
<?php } ?>

</a>

<?php
// Variables given by sphinx
$chplTitle = "2.7";
$pagename = "usingchapel/debugging/bkc";
include "../..//versionButton.php";
?>


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
              <p class="caption" role="heading"><span class="caption-text">Compiling and Running Chapel</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../QUICKSTART.html">Quickstart Instructions</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Using Chapel</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../portability.html">Where can I use Chapel?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../prereqs.html">Chapel Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../chplenv.html">Setting up Your Environment for Chapel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../building.html">Building Chapel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../compiling.html">Compiling Chapel Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../editor-support.html">Editor Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../man.html">Chapel Man Page</a></li>
<li class="toctree-l2"><a class="reference internal" href="../executing.html">Executing Chapel Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../multilocale.html">Multilocale Chapel Execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../launcher.html">Chapel Launchers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tasks.html">Chapel Tasks</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../debugging.html">Debugging Chapel Programs</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Best Known Configurations for Debugging</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#using-the-llvm-backend">Using the LLVM Backend</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-the-c-backend">Using the C Backend</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="launchers.html">Running in gdb/lldb with a Launcher</a></li>
<li class="toctree-l3"><a class="reference internal" href="multilocale.html">Debugging Multilocale Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="memory.html">Debugging Memory-related Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="tasks.html">Debugging Multithreaded Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="sanitizers.html">Sanitizers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../debugging.html#useful-debug-features">Useful Debug Features</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../bugs.html">Reporting Chapel Issues</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../platforms/index.html">Platform-Specific Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../technotes/index.html">Technical Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/index.html">Docs for Contributors</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Writing Chapel Programs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../language/reference.html">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/index.html">Hello World Variants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../primers/index.html">Primers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../language/spec/index.html">Language Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/standard.html">Standard Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/packages.html">Package Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/layoutdist.html">Standard Layouts and Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mason-packages/index.html">Mason Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../users-guide/index.html">Chapel Users Guide (WIP)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Language History</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../language/evolution.html">Chapel Evolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../language/archivedSpecs.html">Documentation Archives</a></li>
</ul>

  <p class="caption" role="heading"><span class="caption-text">Indexes</span></p>
  <ul>
    <li class="toctree-11"><a class="reference internal" href="../../chpl-modindex.html">Chapel Module Index</a></li>
    <li class="toctree-11"><a class="reference internal" href="../../genindex.html">Complete Docs Index</a></li>
  </ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Chapel Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Using Chapel</a></li>
          <li class="breadcrumb-item"><a href="../debugging.html">Debugging Chapel Programs</a></li>
      <li class="breadcrumb-item active">Best Known Configurations for Debugging</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/usingchapel/debugging/bkc.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="best-known-configurations-for-debugging">
<span id="readme-debugging-bkc"></span><h1>Best Known Configurations for Debugging<a class="headerlink" href="#best-known-configurations-for-debugging" title="Link to this heading"></a></h1>
<section id="using-the-llvm-backend">
<h2>Using the LLVM Backend<a class="headerlink" href="#using-the-llvm-backend" title="Link to this heading"></a></h2>
<p>When debugging Chapel using the default LLVM backend, make sure to use the
<code class="docutils literal notranslate"><span class="pre">-g</span></code> flag to generate debug symbols in the executable. This will allow you to
use a debugger like <code class="docutils literal notranslate"><span class="pre">gdb</span></code> or <code class="docutils literal notranslate"><span class="pre">lldb</span></code> to step through the code and inspect
variables.</p>
<p>There are a few flags that may be useful for debugging with the LLVM backend.
For example, the following is the current best configuration which results in
generated code with the best possible debug information:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>chpl<span class="w"> </span>--debug<span class="w"> </span>--preserve-inlined-line-numbers<span class="w"> </span>&lt;source_file&gt;
</pre></div>
</div>
<p>If you intend to use <code class="docutils literal notranslate"><span class="pre">gdb</span></code> to debug your Chapel program, you may also want to
use the <code class="docutils literal notranslate"><span class="pre">--ccflags</span> <span class="pre">-gdwarf-4</span></code>, as <code class="docutils literal notranslate"><span class="pre">gdb</span></code> has been found to have issues with
DWARF 5 debug information generated by the LLVM backend.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>chpl<span class="w"> </span>--debug<span class="w"> </span>--preserve-inlined-line-numbers<span class="w"> </span>--ccflags<span class="w"> </span>-gdwarf-4<span class="w"> </span>&lt;source_file&gt;
</pre></div>
</div>
<p>The following table summarizes the flags that can be used to improve the
debuggability of the generated executable:</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Flag</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--debug</span></code></p></td>
<td><p>Disable select Chapel optimizations and
generate debug symbols in the executable</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--preserve-inlined-line-numbers</span></code></p></td>
<td><p>When code gets inlined (e.g. replacing a
function call with the function body)
maintain the filename and line number
information of the original function.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--ccflags</span> <span class="pre">-gdwarf-4</span></code></p></td>
<td><p>Use DWARF 4 debug information
(useful for <code class="docutils literal notranslate"><span class="pre">gdb</span></code>)</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
<section id="using-the-c-backend">
<h2>Using the C Backend<a class="headerlink" href="#using-the-c-backend" title="Link to this heading"></a></h2>
<p>It may be useful to debug Chapel programs using the C backend. The current best
practice for debugging Chapel source code with the C backend is to use a series
of flags to improve the debuggability of the generated executable. While
debugging with just <code class="docutils literal notranslate"><span class="pre">-g</span></code> is possible, these flags (explained in step 2 below)
result in generated code with debug information that most closely matches the
Chapel source code. This can be done in two steps.</p>
<ol class="arabic">
<li><p>Build the compiler with <code class="docutils literal notranslate"><span class="pre">CHPL_TARGET_COMPILER</span></code> set to <code class="docutils literal notranslate"><span class="pre">gnu</span></code>
(or <code class="docutils literal notranslate"><span class="pre">clang</span></code> if on Mac):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">CHPL_TARGET_COMPILER</span><span class="o">=</span>gnu<span class="w"> </span>make
<span class="c1"># On MacOS</span>
<span class="c1"># CHPL_TARGET_COMPILER=clang make</span>
</pre></div>
</div>
</li>
<li><p>Build the executable from Chapel source code:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>chpl<span class="w"> </span>--target-compiler<span class="o">=</span>gnu<span class="w"> </span>--debug<span class="w"> </span>--preserve-inlined-line-numbers<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--no-munge-user-idents<span class="w"> </span>&lt;source_file&gt;
<span class="c1"># On MacOS</span>
<span class="c1"># chpl --target-compiler=clang --debug --preserve-inlined-line-numbers \</span>
<span class="c1">#   --no-munge-user-idents &lt;source_file&gt;</span>
</pre></div>
</div>
</li>
</ol>
<p>For more details on these settings, read the rest of this section.</p>
<section id="building-the-compiler">
<h3>Building the Compiler<a class="headerlink" href="#building-the-compiler" title="Link to this heading"></a></h3>
<p>For best results while debugging, we recommend building the compiler with
<code class="docutils literal notranslate"><span class="pre">CHPL_TARGET_COMPILER</span></code> set to <code class="docutils literal notranslate"><span class="pre">gnu</span></code> (or <code class="docutils literal notranslate"><span class="pre">clang</span></code> if on Mac). See
<a class="reference internal" href="../chplenv.html#readme-chplenv"><span class="std std-ref">Setting up Your Environment for Chapel</span></a> for more information on building the compiler.</p>
<p>With two invocations of the build command, both backends can be built. First
execute <code class="docutils literal notranslate"><span class="pre">make</span></code> (which uses the LLVM backend by default) and then execute
<code class="docutils literal notranslate"><span class="pre">CHPL_TARGET_COMPILER=gnu</span> <span class="pre">make</span></code>. This will keep the default as LLVM and allow
switching to the C backend as needed for debugging. This can be done for a
particular invocation of the compiler with <code class="docutils literal notranslate"><span class="pre">chpl</span> <span class="pre">--target-compiler=gnu</span> <span class="pre">...</span></code>.</p>
</section>
<section id="building-the-application">
<h3>Building the Application<a class="headerlink" href="#building-the-application" title="Link to this heading"></a></h3>
<p>The following flags can be useful for making the generated C more amenable to
debugging. Any of them can be omitted as desired.</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Flag</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--debug</span></code></p></td>
<td><p>Disable select Chapel optimizations and
generate debug symbols in the executable</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--preserve-inlined-line-numbers</span></code></p></td>
<td><p>When code gets inlined (e.g. replacing a
function call with the function body)
maintain the filename and line number
information of the original function.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--ccflags</span> <span class="pre">-gdwarf-4</span></code></p></td>
<td><p>Use DWARF 4 debug information
(useful for <code class="docutils literal notranslate"><span class="pre">gdb</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--no-munge-user-idents</span></code></p></td>
<td><p>Don’t munge user identifiers (e.g.
variable or function names). Munging
typically prevents conflicts with
identifiers in external code but makes
debugging harder.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--target-compiler=gnu</span></code></p></td>
<td><p>Target the C backend with GCC</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--target-compiler=clang</span></code></p></td>
<td><p>Target the C backend with Clang</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<section id="notes-on-munging">
<h4>Notes on Munging<a class="headerlink" href="#notes-on-munging" title="Link to this heading"></a></h4>
<p>The utility of using a debugger with Chapel depends greatly on your familiarity
with the Chapel generated code.  However, if your program is crashing or running
into a runtime error, you can often determine where that is taking place by
looking at a stack trace within <code class="docutils literal notranslate"><span class="pre">gdb</span></code>.</p>
<p>When debugging Chapel, it is useful to know that in generating its code,
the Chapel compiler renames user identifiers.  By default, the Chapel
compiler munges all user identifiers, such that a variable named <code class="docutils literal notranslate"><span class="pre">x</span></code>
would be code-generated as <code class="docutils literal notranslate"><span class="pre">x_chpl</span></code>.  This munging can be controlled
using the <code class="docutils literal notranslate"><span class="pre">--[no-]munge-user-idents</span></code> flag (see the <code class="docutils literal notranslate"><span class="pre">chpl</span></code> man page
for more information).  In some cases, additional munging may be
required or applied that cannot be turned off.</p>
<p>The net effect of this is that Chapel variables can often be inspected
using <code class="docutils literal notranslate"><span class="pre">p</span></code> <em>name</em><code class="docutils literal notranslate"><span class="pre">_chpl</span></code> (or <code class="docutils literal notranslate"><span class="pre">p</span></code> <em>name</em><code class="docutils literal notranslate"><span class="pre">_chpl&lt;TAB&gt;</span></code> in cases
where the compiler has further renamed the variable).  If the
<code class="docutils literal notranslate"><span class="pre">--no-munge-user-idents</span></code> flag is used, <code class="docutils literal notranslate"><span class="pre">p</span></code> <em>name</em> or
<code class="docutils literal notranslate"><span class="pre">p</span></code> <em>name</em><code class="docutils literal notranslate"><span class="pre">&lt;TAB&gt;</span></code> should work in most cases.</p>
<p>See <a class="reference internal" href="../../developer/bestPractices/GeneratedCode.html#more-munging-info"><span class="std std-ref">Why are my identifiers renamed in the generated code?</span></a> for more information on munging.</p>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../debugging.html" class="btn btn-neutral float-left" title="Debugging Chapel Programs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="launchers.html" class="btn btn-neutral float-right" title="Running in gdb/lldb with a Launcher" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Chapel a Series of LF Projects, LLC.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 



</body>
</html>