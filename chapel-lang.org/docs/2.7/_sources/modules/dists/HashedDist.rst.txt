.. default-domain:: chpl

.. module:: HashedDist
   :synopsis: Distributed associative arrays. 

HashedDist
==========
**Usage**

.. code-block:: chapel

   use HashedDist;


or

.. code-block:: chapel

   import HashedDist;
.. warning::

   HashedDist is unstable and may change in the future

.. record:: hashedDist : writeSerializable

   
   
   The ``hashedDist`` distribution maps an associative domain and its array to a
   set of target locales. Each index (or key) in the domain is mapped to a locale
   based upon its value. When constructing a ``hashedDist`` distribution, you can
   optionally provide a `mapper` function or function object to compute the
   destination locale for each index.
   
   The `mapper` provided can be a class, record, or first class function.  When
   called, it will be passed the index and the ``targetLocales`` array that the
   ``hashedDist`` distribution was initialized with. For example, the following
   record declares a custom mapper:
   
   .. literalinclude:: ../../../../test/distributions/doc-examples/HashedDistExamples.chpl
      :language: chapel
      :start-after: START_EXAMPLE_0
      :end-before: STOP_EXAMPLE_0
   
   If a custom mapper is not provided, a default mapper will be used. The default
   mapper computes the target locale based upon a hash of the index.
   
   .. note::
   
     Hashed is not yet interface stable.
   
   **Example**
   
   The following example uses the custom mapper that was defined earlier in
   order to add ``string`` keys to a distributed domain:
   
   .. literalinclude:: ../../../../test/distributions/doc-examples/HashedDistExamples.chpl
      :language: chapel
      :start-after: START_EXAMPLE_1
      :end-before: STOP_EXAMPLE_1
   
   When run on 6 locales, the output is:
   
   .. literalinclude:: ../../../../test/distributions/doc-examples/HashedDistExamples.good
   
   **Initializer Arguments**
   
   The ``hashedDist`` domain map initializer is defined as follows:
   
   .. code-block:: chapel
   
     proc init(type idxType,
               mapper:?t = new DefaultMapper(),
               targetLocales: [] locale = Locales)
   
    

